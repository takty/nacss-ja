window.NACSS=window.NACSS||{},function(t){function n(t,n){const e=n.styleSegment;for(const n of Array.from(t.getElementsByTagName("span")))if(0===e.length&&""===n.className||A(n,e)){const t=document.createDocumentFragment();for(const e of Array.from(n.childNodes))t.appendChild(e);n.parentNode.replaceChild(t,n)}}function e(t,n){for(const r of Array.from(t.childNodes))1===r.nodeType?A(r,n.styleDisabled)||e(r,n):3===r.nodeType&&o(r,n)}function o(t,n){let e=t.textContent;e=function(t){return t.replace(/([^\x01-\x7E\xA1-\xDF]+)([\t\n]+|[ \f\n\r\t\v\u00a0\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\ufeff]{2})([^\x01-\x7E\xA1-\xDF]+)/g,((t,n,e,o)=>n+o))}(e);const[o,r]=l(e),s=N(e,o,r,n);t.parentNode.replaceChild(s,t)}const r="そうはいうものの,そればかりでなく,ありとあらゆる,いずれにしても,かけがえのない,そうしてみると,そうすることで,そうでないなら,そうではあるが,それにくわえて,それはさておき,どっちにしても,とはいうものの,なぜかというと,にもかかわらず,いいかえると,いずれにしろ,いずれにせよ,いってみれば,おもいきった,しかしながら,じつのところ,じつはいうと,そうしないと,そうではなく,そのためには,それどころか,それにしても,それによって,そればかりか,それはそうと,どちらにせよ,どっちにせよ,いろいろな,このように,さまざまな,さもないと,したがって,そういえば,そうしたら,そうすると,そうすれば,そうなると,そうなれば,そのかわり,それなのに,それゆえに,たくまざる,だとしたら,だとすると,だとすれば,ではあるが,というのは,というのも,というより,なぜならば,やすやすと,ようするに,ああいう,ああした,あたかも,あらゆる,あるいは,いかなる,いつかは,いっぱい,いろんな,いわゆる,おおきな,おかしな,おそらく,おなじく,おまけに,かえって,かくして,かわりに,くわえて,ぐんぐん,けれども,こういう,こうして,このため,しかるに,しばらく,すなわち,そういう,そうした,そのうえ,そのくせ,そのため,そもそも,それから,それから,それでは,それでも,それとも,それなら,それには,たいした,たいそう,たくさん,だけども,たとえば,たやすく,ちいさな,ちなみに,というか,どういう,とうてい,ときどき,ところが,どころか,ところで,となると,となれば,とにかく,とはいえ,ともあれ,とりわけ,ないしは,なかでも,なぜなら,なぜなら,なだたる,なにしろ,ならびに,はじめに,はずべき,はなはだ,ひいては,ひょんな,ふとした,ほかには,ほかにも,めっきり,もしくは,もっとも,あまり,あらぬ,ありし,あんな,いただ,いつか,いつも,いわば,および,かかる,かなり,きたる,きっと,けれど,ことに,こんな,さらに,しかし,しかも,じつは,じゃあ,すぐに,すぐに,すると,そこで,そして,そっと,それで,それに,そんな,だから,だけど,ただし,だって,たまに,つぎに,つまり,ですが,とある,どうか,ときに,とくに,とても,とんだ,どんな,なにせ,なのに,ならば,ほんの,まさか,または,むこう,むしろ,もっと,もっと,もっと,ものの,やはり,ゆえに,ようは,よって,ああ,あの,ある,かつ,かの,けど,こう,この,さて,さる,そう,その,だが,ただ,では,でも,どう,どの,なお,なぜ,のに,また,もし,よく,わが".split(","),s="けれども,ところで,において,について,かしら,がてら,くらい,ぐらい,けれど,ってば,ながら,などの,なんぞ,ばかり,ものか,ものの,かい,から,かり,きり,こそ,さえ,しか,ずつ,だけ,だの,たり,つつ,では,ても,でも,とも,なぞ,など,なり,にて,には,ので,のに,のみ,ほど,まで,まま,もん,やら,より,か,が,さ,し,ぜ,ぞ,て,で,と,な,に,ね,の,は,ば,へ,も,や,よ,わ,を".split(","),c="がおこな,のような,があり,がおき,ができ,がでて".split(","),f="お,ご".split(","),i="第,約".split(",");function l(t){const n=function(t){const n=[];for(const e of t)n.push(g(e));return n}(t),e=Array(n.length).fill(0);!function(t,n){for(let e=1;e<t.length;e+=1){const o=t[e-1],r=t[e];n[e]+=(m[o+r]??0)+(m["*"+r]??0)+(m[o+"*"]??0)}}(n,e);const o=Array.from(t);return function(t,n,e){for(const o of e){const e=Array.from(o),r=e.length;for(let o=0;;){const s=p(t,e,o);if(-1===s)break;const c=s+r;n[s]-=r;for(let t=1;t<r;t+=1)n[s+t]+=r;o=c}}}(o,e,r),function(t,n,e){for(const o of e){const e=Array.from(o),r=e.length;for(let o=0;;){const s=p(t,e,o);if(-1===s)break;const c=s+r;n[s]+=r;for(let t=1;t<r;t+=1)n[s+t]+=r;o=c}}}(o,e,s),function(t,n,e,o){for(const r of e){const e=Array.from(r),s=e.length;for(let r=0;;){const c=p(t,e,r);if(-1===c)break;const f=c+s;n[c+o]-=s-o;for(let t=1;t<s-o;t+=1)n[c+o+t]+=s-o;r=f}}}(o,e,c,1),h(o,n,e,f,a,"H",-1,2),h(o,n,e,i,u,"N",0,2),[n,e]}const u="SETIKNVO",a="SETIKHNVO",d=[["S",/[「『（［｛〈《【〔〖〘〚＜“]/u],["E",/[」』）］｝〉》】〕〗〙〛＞”]/u],["T",/[、，。．？！を：・]/u],["I",/[ぁ-んゝ]/u],["K",/[ァ-ヴーｱ-ﾝﾞｰ]/u],["H",/[々〆ヵヶ]|[\u4E00-\u9FFF]|[\u{20000}-\u{2A6DF}]/u],["N",/[0-9０-９]/u],["V",/\s/u]];function g(t){for(const[n,e]of d)if(e.test(t))return n;return"O"}const m={"*S":-1,"S*":2,"*E":2,"*T":99,"T*":-99,"*V":-1,"V*":-1,II:1,KK:1,HH:1,NN:1,OO:1,TT:1,HI:1,NH:2,NK:1,NI:1,ON:1,NO:1};function h(t,n,e,o,r,s,c,f){const i=n.length;for(const l of o){const o=Array.from(l),u=o.length;for(let l=0;;){const a=p(t,o,l);if(-1===a)break;const d=a+u;if((0===a||0!==a&&r.includes(n[a-1]))&&(d===i||d<i&&s.includes(n[d]))){e[a]+=c,d<e.length&&(e[d]+=f);for(let t=1;t<u;t+=1)e[a+t]+=u}l=d}}}function p(t,n,e=0){if(null==t)return-1;if(0===t.length)return 0;for(let o=e;o<t.length-n.length+1;o+=1){let e=!0;for(let r=0;r<n.length;r+=1)if(t[o+r]!==n[r]){e=!1;break}if(e)return o}return-1}function N(t,n,e,o){const r=document.createDocumentFragment();let s="",c=0,f=0;for(const i of t){if(e[f]<=0){S(r,s,y(n,c,f),o.styleSegment),s="",c=f}s+=i,f+=1}if(s.length){S(r,s,y(n,c,n.length),o.styleSegment)}return r}function S(t,n,e,o){if(e)t.appendChild(document.createTextNode(n));else{const e=document.createElement("span");e.appendChild(document.createTextNode(n)),o.length&&function(t,n,e=!0,o=""){const r=n.substr(1);n.startsWith(":")?e?t.dataset[r]=o:delete t.dataset[r]:e?t.classList.add([r,o].join("-")):t.classList.remove([r,o].join("-"))}(e,o),t.appendChild(e)}}function y(t,n,e){for(let o=n;o<e;o+=1){const n=t[o];if(!"NVO".includes(n))return!1}return!0}function A(t,n){const e=n.substr(1);return n.startsWith(":")?void 0!==t.dataset[e]:t.classList.contains(e)}t.jaSegmenter=function(t,o={}){if(0!==t.length){o=Object.assign({styleSegment:"",styleDisabled:":ncNoSegmentation",doDisableOnSelecting:!0},o);for(const r of t)if(e(r,o),o.doDisableOnSelecting){const t=function(){n(r,o),r.removeEventListener("selectstart",t)};r.addEventListener("selectstart",t)}}},t.jaApplySegmenter=function(t,n={}){n=Object.assign({styleSegment:"",styleDisabled:":ncNoSegmentation"},n);const[e,o]=l(t);return N(t,e,o,n)}}(window.NACSS);
//# sourceMappingURL=ja-segmenter.min.js.map