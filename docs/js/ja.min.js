window.NACSS=window.NACSS||{},function(n){function t(n,t){const e=t.substr(1);return t.startsWith(":")?void 0!==n.dataset[e]:n.classList.contains(e)}function e(n,t,e=!0,o=""){const r=t.substr(1);t.startsWith(":")?e?n.dataset[r]=o:delete n.dataset[r]:e?n.classList.add([r,o].join("-")):n.classList.remove([r,o].join("-"))}function o(n){return n.replace(/([^\x01-\x7E\xA1-\xDF]+)([\t\n]+|[ \f\n\r\t\v\u00a0\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\ufeff]{2})([^\x01-\x7E\xA1-\xDF]+)/g,((n,t,e,o)=>t+o))}!function(){function r(n,e){for(const o of Array.from(n.getElementsByTagName("span")))if(t(o,e.styleKerning)){const n=document.createDocumentFragment();for(const t of Array.from(o.childNodes))n.appendChild(t);o.parentNode.replaceChild(n,o)}}function s(n,e,o){for(const r of Array.from(n.childNodes))1===r.nodeType?t(r,o.styleDisabled)||s(r,e,o):3===r.nodeType&&i(r,e,o)}function i(n,t,e){const[r,s]=function(n){const t=n.parentNode;if(!(t instanceof HTMLElement))return[!1,!1];const e=getComputedStyle(t).display;if(!e.includes("inline"))return c(n);if("inline-block"===e){if(1!==t.childNodes.length)return c(n);const e=t.parentNode;if(e){if(!getComputedStyle(e).display.includes("inline"))return c(t,!0)}}return[!1,!1]}(n);let i=n.textContent;r&&(i=function(n){const t=n.match(/^[\n\r\t ]*(\u3000*)/);return(t&&1<t.length?t[1]:"")+n.replace(/^\s+/g,"")}(i)),s&&(i=function(n){return n.replace(/\s+$/g,"")}(i)),i=o(i);let l="";if(n.nextSibling&&1===n.nextSibling.nodeType&&"inline"===getComputedStyle(n.nextSibling).display&&(l=n.nextSibling.innerText),!n.nextSibling&&n.parentNode.nextSibling){const t=n.parentNode.nextSibling;if(1===t.nodeType){getComputedStyle(t).display.includes("inline")&&(l=t.innerText)}3===t.nodeType&&(l=t.textContent)}const f=u(i,t,r,l,e.doAssignAttribute);if(f.length){const t=a(i,f,e);n.parentNode.replaceChild(t,n)}}function c(n,t=!1){return[t?f(n.previousSibling):l(n.previousSibling),l(n.nextSibling)]}function l(n){return null===n||n instanceof HTMLElement&&("BR"===n.tagName||!getComputedStyle(n).display.includes("inline"))}function f(n){for(;;){if(null===n)return!0;if(1===n.nodeType)return"BR"===n.tagName||!getComputedStyle(n).display.includes("inline");if(3===n.nodeType&&!n.textContent.trim())return!0;n=n.previousSibling}}function u(n,t,e,o,r){let s=Array.from(n);const i=[];o.length&&(s=s.concat(Array.from(o)));let c=0;for(let n=0;n<s.length;n+=1){const o=s[n],l=s[n+1];let f="";""!==o&&""!==l&&t.has(o+l)&&(f=r?"s":"letter-spacing:-0.4em;"),0===n&&e&&""!==o&&t.has(o)&&(f+=r?"h":"margin-left:-0.4em"),f.length?(c&&(i.push(c),c=0),i.push(f)):c+=1}return i.length&&c&&i.push(c),i}function a(n,t,o){const r=Array.from(n),s=document.createDocumentFragment();let i=0;for(const n of t)if(Number.isInteger(n)){const t=document.createTextNode(r.slice(i,i+n).join(""));s.appendChild(t),i+=n}else{const t=document.createElement("span");t.appendChild(document.createTextNode(r.slice(i,i+1).join(""))),n.length<=2?e(t,o.styleKerning,!0,n):t.style=n,s.appendChild(t),i+=1}return s}const d=new Set;{function g(n,t,e){for(const o of t)for(const t of e)n.add(o+t)}g(d,"、，。．・｜：　","「『（［｛〈《【〔"),g(d,"」』）］｝〉》】〕","、，。．・｜：,."),g(d,"」』）］｝〉》】〕","「『（［｛〈《【〔"),g(d,"「『（［｛〈《【〔","「『（［｛〈《【〔"),g(d,"」』）］｝〉》】〕","」』）］｝〉》】〕"),function(n,t){for(const e of t)n.add(e)}(d,"「『（［｛〈《【〔")}n.jaKerning=function(n,t={}){if(0!==n.length){t=Object.assign({styleKerning:":ncKern",styleDisabled:":ncNoKerning",doAssignAttribute:!0,doDisableOnSelecting:!0},t);for(const e of n)if(s(e,d,t),t.doAssignAttribute&&t.doDisableOnSelecting){const n=function(){r(e,t),e.removeEventListener("selectstart",n)};e.addEventListener("selectstart",n)}}},n.jaApplyKerning=function(n,t={}){t=Object.assign({styleKerning:":ncKern",styleDisabled:":ncNoKerning",doAssignAttribute:!0},t);const e=u(n,d,!1,t.doAssignAttribute);return e.length?a(n,e,t):null}}(),function(){const t=["S","E","I","K","H","N"],e={S:/[「『（［｛〈《【〔〖〘〚＜“]/u,E:/[」』）］｝〉》】〕〗〙〛＞”、，。．？！を：・]/u,I:/[ぁ-んゝ]/u,K:/[ァ-ヴーｱ-ﾝﾞｰ]/u,H:/[一-龠々〆ヵヶ]/u,N:/[0-9０-９]/u},o={"S*":1,II:1,KK:1,HH:1,HI:1,NN:1,OO:1,ON:1,NO:1},r="でなければ|について|により|かしら|くらい|けれど|なのか|ばかり|ながら|ことよ|こそ|こと|さえ|しか|した|たり|だけ|だに|だの|つつ|ても|てよ|でも|とも|から|など|なり|ので|のに|ほど|まで|もの|やら|より|って|で|と|な|に|ね|の|も|は|ば|へ|や|わ|を|か|が|さ|し|ぞ|て".split("|"),s={};for(const n of r)s[n]=!0;const i="お|ご".split("|"),c="ありとあらゆる|おもいきった|たくまざる|ああいう|ああした|あらゆる|いかなる|いかれる|いわゆる|おおきな|おかしな|そういう|ちいさな|なだたる|はずべき|ひょんな|ふとした|あんな|かかる|きたる|こんな|そんな|とんだ|どんな|むこう|あの|ある|かの|この|さる|その|どの|わが".split("|");function l(n){const t=n.tagName,e=[];for(const o of Array.from(n.childNodes))1===o.nodeType?(l(o),e.push(o.outerHTML)):3===o.nodeType&&e.push(f(o.textContent,t));n.innerHTML=e.join("")}function f(n,t){let e=[],r="",l="",f="";for(let t=0,s=n.length;t<s;t+=1){const s=n.substring(t,t+1),i=u(s);o[r+i]||o["*"+i]||o[r+"*"]?(l+=s,l===s&&(f=i)):(0<l.length&&e.push([l,f,r]),l=s,f=i),r=i}return 0<l.length&&e.push([l,f,r]),e=function(n){const t=[];let e=null;for(const o of n)e&&s[o[0]]?(e[0]+=o[0],e[2]=o[2]):(t.push(o),e=o);return t}(e),e=function(n){const t=[];let e=null;for(const o of n)e&&"E"===o[1]?(e[0]+=o[0],e[2]=o[2]):(t.push(o),e=o);return t}(e),e=function(n){const t=[];let e=null;for(const o of n)e&&"N"===e[2]?(e[0]+=o[0],e[2]=o[2]):(t.push(o),e=o);return t}(e),e=function(n,t){if(n.length<=1)return n;for(let e=1,o=n.length;e<o;e+=1){const o=n[e],r=n[e-1],s=r[0];if("H"===o[1])for(const n of t)if(s.endsWith(n)){const t=n.length;r[0]=s.substr(0,s.length-t),r[2]=u(r[0][r[0].length-1]),o[0]=n+o[0],o[1]="I"}}return n}(e,i),e=function(n,t){const e=[];for(const o of n){let n=!1;for(const r of t)if(o[0].endsWith(r)){o[0]=o[0].substr(0,o[0].length-r.length),e.push(o),e.push([r,"I","I"]),n=!0;break}n||e.push(o)}return e}(e,c),1!==e.length||t&&"SPAN"!==t?function(n){const t=/^\s/,e=/\s$/;let o="";for(const r of n)if("O"!==r[1]||"O"!==r[2]){const n=t.exec(r[0]),s=e.exec(r[0]),i=null!==n?n[0]:"",c=null!==s?s[0]:"";o+=i+"<span>"+r[0]+"</span>"+c}else o+=r[0];return o}(e):n}function u(n){for(const o of t){if(e[o].test(n))return o}return"O"}n.jaSegmenterOld=function(n){for(const t of n)l(t)},n.jaApplySegmenterOld=f}(),function(){function r(n,e){const o=e.styleSegment;for(const e of Array.from(n.getElementsByTagName("span")))if(0===o.length&&""===e.className||t(e,o)){const n=document.createDocumentFragment();for(const t of Array.from(e.childNodes))n.appendChild(t);e.parentNode.replaceChild(n,e)}}function s(n,e){for(const o of Array.from(n.childNodes))1===o.nodeType?t(o,e.styleDisabled)||s(o,e):3===o.nodeType&&i(o,e)}function i(n,t){let e=n.textContent;e=o(e);const[r,s]=d(e),i=b(e,r,s,t);n.parentNode.replaceChild(i,n)}const c="そうはいうものの,そればかりでなく,ありとあらゆる,いずれにしても,かけがえのない,そうしてみると,そうすることで,そうでないなら,そうではあるが,それにくわえて,それはさておき,どっちにしても,とはいうものの,なぜかというと,にもかかわらず,いいかえると,いずれにしろ,いずれにせよ,いってみれば,おもいきった,しかしながら,じつのところ,じつはいうと,そうしないと,そうではなく,そのためには,それどころか,それにしても,それによって,そればかりか,それはそうと,どちらにせよ,どっちにせよ,いろいろな,このように,さまざまな,さもないと,したがって,そういえば,そうしたら,そうすると,そうすれば,そうなると,そうなれば,そのかわり,それなのに,それゆえに,たくまざる,だとしたら,だとすると,だとすれば,ではあるが,というのは,というのも,というより,なぜならば,やすやすと,ようするに,ああいう,ああした,あたかも,あらゆる,あるいは,いかなる,いつかは,いっぱい,いろんな,いわゆる,おおきな,おかしな,おそらく,おなじく,おまけに,かえって,かくして,かわりに,くわえて,ぐんぐん,けれども,こういう,こうして,このため,しかるに,しばらく,すなわち,そういう,そうした,そのうえ,そのくせ,そのため,そもそも,それから,それから,それでは,それでも,それとも,それなら,それには,たいした,たいそう,たくさん,だけども,たとえば,たやすく,ちいさな,ちなみに,というか,どういう,とうてい,ときどき,ところが,どころか,ところで,となると,となれば,とにかく,とはいえ,ともあれ,とりわけ,ないしは,なかでも,なぜなら,なぜなら,なだたる,なにしろ,ならびに,はじめに,はずべき,はなはだ,ひいては,ひょんな,ふとした,ほかには,ほかにも,めっきり,もしくは,もっとも,あまり,あらぬ,ありし,あんな,いただ,いつか,いつも,いわば,および,かかる,かなり,きたる,きっと,けれど,ことに,こんな,さらに,しかし,しかも,じつは,じゃあ,すぐに,すぐに,すると,そこで,そして,そっと,それで,それに,そんな,だから,だけど,ただし,だって,たまに,つぎに,つまり,ですが,とある,どうか,ときに,とくに,とても,とんだ,どんな,なにせ,なのに,ならば,ほんの,まさか,または,むこう,むしろ,もっと,もっと,もっと,ものの,やはり,ゆえに,ようは,よって,ああ,あの,ある,かつ,かの,けど,こう,この,さて,さる,そう,その,だが,ただ,では,でも,どう,どの,なお,なぜ,のに,また,もし,よく,わが".split(","),l="けれども,ところで,において,について,かしら,がてら,くらい,ぐらい,けれど,ってば,ながら,などの,なんぞ,ばかり,ものか,ものの,かい,から,かり,きり,こそ,さえ,しか,ずつ,だけ,だの,たり,つつ,では,ても,でも,とも,なぞ,など,なり,にて,には,ので,のに,のみ,ほど,まで,まま,もん,やら,より,か,が,さ,し,ぜ,ぞ,て,で,と,な,に,ね,の,は,ば,へ,も,や,よ,わ,を".split(","),f="がおこな,のような,があり,がおき,ができ,がでて".split(","),u="お,ご".split(","),a="第,約".split(",");function d(n){const t=function(n){const t=[];for(const e of n)t.push(m(e));return t}(n),e=Array(t.length).fill(0);!function(n,t){for(let e=1;e<n.length;e+=1){const o=n[e-1],r=n[e];t[e]+=(y[o+r]??0)+(y["*"+r]??0)+(y[o+"*"]??0)}}(t,e);const o=Array.from(n);return function(n,t,e){for(const o of e){const e=Array.from(o),r=e.length;for(let o=0;;){const s=S(n,e,o);if(-1===s)break;const i=s+r;t[s]-=r;for(let n=1;n<r;n+=1)t[s+n]+=r;o=i}}}(o,e,c),function(n,t,e){for(const o of e){const e=Array.from(o),r=e.length;for(let o=0;;){const s=S(n,e,o);if(-1===s)break;const i=s+r;t[s]+=r;for(let n=1;n<r;n+=1)t[s+n]+=r;o=i}}}(o,e,l),function(n,t,e,o){for(const r of e){const e=Array.from(r),s=e.length;for(let r=0;;){const i=S(n,e,r);if(-1===i)break;const c=i+s;t[i+o]-=s-o;for(let n=1;n<s-o;n+=1)t[i+o+n]+=s-o;r=c}}}(o,e,f,1),N(o,t,e,u,p,"H",-1,2),N(o,t,e,a,g,"N",0,2),[t,e]}const g="SETIKNVO",p="SETIKHNVO",h=[["S",/[「『（［｛〈《【〔〖〘〚＜“]/u],["E",/[」』）］｝〉》】〕〗〙〛＞”]/u],["T",/[、，。．？！を：・]/u],["I",/[ぁ-んゝ]/u],["K",/[ァ-ヴーｱ-ﾝﾞｰ]/u],["H",/[々〆ヵヶ]|[\u4E00-\u9FFF]|[\u{20000}-\u{2A6DF}]/u],["N",/[0-9０-９]/u],["V",/\s/u]];function m(n){for(const[t,e]of h)if(e.test(n))return t;return"O"}const y={"*S":-1,"S*":2,"*E":2,"*T":99,"T*":-99,"*V":-1,"V*":-1,II:1,KK:1,HH:1,NN:1,OO:1,TT:1,HI:1,NH:2,NK:1,NI:1,ON:1,NO:1};function N(n,t,e,o,r,s,i,c){const l=t.length;for(const f of o){const o=Array.from(f),u=o.length;for(let f=0;;){const a=S(n,o,f);if(-1===a)break;const d=a+u;if((0===a||0!==a&&r.includes(t[a-1]))&&(d===l||d<l&&s.includes(t[d]))){e[a]+=i,d<e.length&&(e[d]+=c);for(let n=1;n<u;n+=1)e[a+n]+=u}f=d}}}function S(n,t,e=0){if(null==n)return-1;if(0===n.length)return 0;for(let o=e;o<n.length-t.length+1;o+=1){let e=!0;for(let r=0;r<t.length;r+=1)if(n[o+r]!==t[r]){e=!1;break}if(e)return o}return-1}function b(n,t,e,o){const r=document.createDocumentFragment();let s="",i=0,c=0;for(const l of n){if(e[c]<=0){A(r,s,T(t,i,c),o.styleSegment),s="",i=c}s+=l,c+=1}if(s.length){A(r,s,T(t,i,t.length),o.styleSegment)}return r}function A(n,t,o,r){if(o)n.appendChild(document.createTextNode(t));else{const o=document.createElement("span");o.appendChild(document.createTextNode(t)),r.length&&e(o,r),n.appendChild(o)}}function T(n,t,e){for(let o=t;o<e;o+=1){const t=n[o];if(!"NVO".includes(t))return!1}return!0}n.jaSegmenter=function(n,t={}){if(0!==n.length){t=Object.assign({styleSegment:"",styleDisabled:":ncNoSegmentation",doDisableOnSelecting:!0},t);for(const e of n)if(s(e,t),t.doDisableOnSelecting){const n=function(){r(e,t),e.removeEventListener("selectstart",n)};e.addEventListener("selectstart",n)}}},n.jaApplySegmenter=function(n,t={}){t=Object.assign({styleSegment:"",styleDisabled:":ncNoSegmentation"},t);const[e,o]=d(n);return b(n,e,o,t)}}()}(window.NACSS);
//# sourceMappingURL=ja.min.js.map