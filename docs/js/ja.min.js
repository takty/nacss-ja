"use strict";window.NACSS=window.NACSS||{},window.NACSS.ja=window.NACSS.ja||{},(e=>{function n(e,n){const t=n.substr(1);return n.startsWith(":")?void 0!==e.dataset[t]:e.classList.contains(t)}function t(e,n,t=!0,o=""){const i=n.substr(1);if(n.startsWith(":"))t?e.dataset[i]=o:delete e.dataset[i];else{const n=[i,o].join("-");t?e.classList.add(n):e.classList.remove(n)}}{function i(e,n={}){if(0!==e.length){(n=Object.assign({styleKerning:":ncKern",styleDisabled:":ncNoKerning",ignoredTags:["PRE"],doAssignAttribute:!0,doDisableOnSelecting:!0},n)).ignoredTags=n.ignoredTags.map((e=>e.toUpperCase()));for(const t of e)if(l(t,m,n),n.doAssignAttribute&&n.doDisableOnSelecting){const e=()=>{s(t,n),t.removeEventListener("selectstart",e)};t.addEventListener("selectstart",e)}}}function s(e,t){for(const o of[...e.getElementsByTagName("span")])if(n(o,t.styleKerning)){const e=document.createDocumentFragment();for(const n of[...o.childNodes])e.appendChild(n);o.parentNode.replaceChild(e,o)}}function r(e,n={}){n=Object.assign({styleKerning:":ncKern",styleDisabled:":ncNoKerning",doAssignAttribute:!0},n);const t=g(e,m,!1,n.doAssignAttribute);return t.length?p(e,t,n):null}function l(e,t,o){for(const i of[...e.childNodes])1===i.nodeType?n(i,o.styleDisabled)||o.ignoredTags.includes(i.tagName)||l(i,t,o):3===i.nodeType&&c(i,t,o)}function c(e,n,t){const[i,s]=u(e);let r=e.textContent;i&&(r=function(e){const n=e.match(/^[\n\r\t ]*(\u3000*)/);return(n&&1<n.length?n[1]:"")+e.replace(/^\s+/g,"")}(r)),s&&(r=function(e){return e.replace(/\s+$/g,"")}(r)),r=o(r);let l="";if(e.nextSibling&&1===e.nextSibling.nodeType&&"inline"===getComputedStyle(e.nextSibling).display&&(l=e.nextSibling.innerText),!e.nextSibling&&e.parentNode.nextSibling){const n=e.parentNode.nextSibling;if(1===n.nodeType){getComputedStyle(n).display.includes("inline")&&(l=n.innerText)}3===n.nodeType&&(l=n.textContent)}const c=g(r,n,i,l,t.doAssignAttribute);if(c.length){const n=p(r,c,t);e.parentNode.replaceChild(n,e)}}function u(e){const n=e.parentNode;if(!(n instanceof HTMLElement))return[!1,!1];const t=getComputedStyle(n).display;if(!t.includes("inline"))return a(e);if("inline-block"===t){if(1!==n.childNodes.length)return a(e);const t=n.parentNode;if(t){if(!getComputedStyle(t).display.includes("inline"))return a(n,!0)}}return[!1,!1]}function a(e,n=!1){return[n?f(e.previousSibling):d(e.previousSibling),d(e.nextSibling)]}function d(e){return null===e||e instanceof HTMLElement&&("BR"===e.tagName||!getComputedStyle(e).display.includes("inline"))}function f(e){for(;;){if(null===e)return!0;if(1===e.nodeType)return"BR"===e.tagName||!getComputedStyle(e).display.includes("inline");if(3===e.nodeType&&!e.textContent.trim())return!0;e=e.previousSibling}}function g(e,n,t,o,i){let s=[...e];const r=[];o.length&&(s=s.concat([...o]));let l=0;for(let e=0;e<s.length;e+=1){const o=s[e],c=s[e+1];let u="";""!==o&&""!==c&&n.has(o+c)&&(u=i?"s":"letter-spacing:-0.4em;"),0===e&&t&&""!==o&&n.has(o)&&(u+=i?"h":"margin-left:-0.4em"),u.length?(l&&(r.push(l),l=0),r.push(u)):l+=1}return r.length&&l&&r.push(l),r}function p(e,n,o){const i=[...e],s=document.createDocumentFragment();let r=0;for(const e of n)if(Number.isInteger(e)){const n=document.createTextNode(i.slice(r,r+e).join(""));s.appendChild(n),r+=e}else{const n=document.createElement("span");n.appendChild(document.createTextNode(i.slice(r,r+1).join(""))),e.length<=2?t(n,o.styleKerning,!0,e):n.style=e,s.appendChild(n),r+=1}return s}const m=new Set;{function h(e,n,t){for(const o of n)for(const n of t)e.add(o+n)}function N(e,n){for(const t of n)e.add(t)}h(m,"、，。．・｜：　","「『（［｛〈《【〔"),h(m,"」』）］｝〉》】〕","、，。．・｜：,."),h(m,"」』）］｝〉》】〕","「『（［｛〈《【〔"),h(m,"「『（［｛〈《【〔","「『（［｛〈《【〔"),h(m,"」』）］｝〉》】〕","」』）］｝〉》】〕"),N(m,"「『（［｛〈《【〔")}e.applyKerning=i,e.applyKerningToString=r}{function S(e,n={}){if(0!==e.length){T(n=Object.assign({styleSegment:"",styleDisabled:":ncNoSegmentation",doDisableOnSelecting:!0,properNouns:[]},n));for(const t of e)if(C(t,n),n.doDisableOnSelecting){const e=()=>{y(t,n),t.removeEventListener("selectstart",e)};t.addEventListener("selectstart",e)}}}function y(e,t){const o=t.styleSegment;for(const t of[...e.getElementsByTagName("span")])if(0===o.length&&""===t.className||n(t,o)){const e=document.createDocumentFragment();for(const n of[...t.childNodes])e.appendChild(n);t.parentNode.replaceChild(e,t)}}function b(e,n={}){T(n=Object.assign({styleSegment:"",styleDisabled:":ncNoSegmentation",properNouns:[]},n));const[t,o]=v(e,n.properNouns);return W(e,t,o,n)}function T(e){const n=e.properNouns.map((e=>[...e]));n.sort(((e,n)=>n.length-e.length)),e.properNouns=n}function C(e,t){for(const o of[...e.childNodes])1===o.nodeType?n(o,t.styleDisabled)||C(o,t):3===o.nodeType&&x(o,t)}function x(e,n){let t=e.textContent;t=o(t);const[i,s]=v(t,n.properNouns),r=W(t,i,s,n);e.parentNode.replaceChild(r,e)}const A="そうはいうものの,そればかりでなく,ありとあらゆる,いずれにしても,かけがえのない,そうしてみると,そうすることで,そうでないなら,そうではあるが,それにくわえて,それはさておき,どっちにしても,とはいうものの,なぜかというと,にもかかわらず,いいかえると,いずれにしろ,いずれにせよ,いってみれば,おもいきった,しかしながら,じつのところ,じつはいうと,そうしないと,そうではなく,そのためには,それどころか,それにしても,それによって,そればかりか,それはそうと,どちらにせよ,どっちにせよ,いろいろな,このように,さまざまな,さもないと,したがって,そういえば,そうしたら,そうすると,そうすれば,そうなると,そうなれば,そのかわり,それなのに,それゆえに,たくまざる,だとしたら,だとすると,だとすれば,ではあるが,というのは,というのも,というより,なぜならば,やすやすと,ようするに,ああいう,ああした,あたかも,あらゆる,あるいは,いかなる,いつかは,いっぱい,いろんな,いわゆる,おおきな,おかしな,おそらく,おなじく,おまけに,かえって,かくして,かわりに,くわえて,ぐんぐん,けれども,こういう,こうして,このため,しかるに,しばらく,すなわち,そういう,そうした,そのうえ,そのくせ,そのため,そもそも,それから,それから,それでは,それでも,それとも,それなら,それには,たいした,たいそう,たくさん,だけども,たとえば,たやすく,ちいさな,ちなみに,というか,どういう,とうてい,ときどき,ところが,どころか,ところで,となると,となれば,とにかく,とはいえ,ともあれ,とりわけ,ないしは,なかでも,なぜなら,なぜなら,なだたる,なにしろ,ならびに,はじめに,はずべき,はなはだ,ひいては,ひょんな,ふとした,ほかには,ほかにも,めっきり,もしくは,もっとも,あまり,あらぬ,ありし,あんな,いただ,いつか,いつも,いわば,および,かかる,かなり,きたる,きっと,けれど,ことに,こんな,さらに,しかし,しかも,じつは,じゃあ,すぐに,すぐに,すると,そこで,そして,そっと,それで,それに,そんな,だから,だけど,ただし,だって,たまに,つぎに,つまり,ですが,とある,どうか,ときに,とくに,とても,とんだ,どんな,なにせ,なのに,ならば,ほんの,まさか,または,むこう,むしろ,もっと,もっと,もっと,ものの,やはり,ゆえに,ようは,よって,ああ,あの,ある,かつ,かの,けど,こう,この,さて,さる,そう,その,だが,ただ,では,でも,どう,どの,なお,なぜ,のに,また,もし,よく,わが".split(","),E="けれども,ところで,において,について,かしら,がてら,くらい,ぐらい,けれど,ってば,ながら,などの,なんぞ,ばかり,ものか,ものの,かい,から,かり,きり,こそ,さえ,しか,ずつ,だけ,だの,たり,つつ,では,ても,でも,とも,なぞ,など,なり,にて,には,ので,のに,のみ,ほど,まで,まま,もん,やら,より,か,が,さ,し,ぜ,ぞ,て,で,と,な,に,ね,の,は,ば,へ,も,や,よ,わ,を".split(","),D="がおこな,のような,があり,がおき,ができ,がでて".split(","),K="お,ご".split(","),O="第,約".split(",");function v(e,n){const t=L(e),o=Array(t.length).fill(0);k(t,o);const i=[...e];return n.length&&B(i,o,n,-1),B(i,o,A,-1),B(i,o,E,1),B(i,o,D,-1,1),R(i,t,o,K,j,"H",-1,2),R(i,t,o,O,w,"N",0,2),[t,o]}const w="SETIKNVO",j="SETIKHNVO",F="NVO",H=[["S",/[「『（［｛〈《【〔〖〘〚＜“]/u],["E",/[」』）］｝〉》】〕〗〙〛＞”]/u],["T",/[、，。．？！を：・]/u],["I",/[ぁ-んゝ]/u],["K",/[ァ-ヴーｱ-ﾝﾞｰ]/u],["H",/[々〆ヵヶ]|[\u4E00-\u9FFF]|[\u{20000}-\u{2A6DF}]/u],["N",/[0-9０-９]/u],["V",/\s/u]];function L(e){const n=[];for(const t of e)n.push(I(t));return n}function I(e){for(const[n,t]of H)if(t.test(e))return n;return"O"}const V={"*S":-1,"S*":2,"*E":2,"*T":99,"T*":-99,"*V":-1,"V*":-1,II:1,KK:1,HH:1,NN:1,OO:1,TT:1,HI:1,NH:2,NK:1,NI:1,ON:1,NO:1};function k(e,n){for(let t=1;t<e.length;t+=1){const o=e[t-1],i=e[t];n[t]+=(V[o+i]??0)+(V["*"+i]??0)+(V[o+"*"]??0)}}function B(e,n,t,o,i=0){for(const s of t){const t=[...s],r=t.length;for(let s=0;;){const l=M(e,t,s);if(-1===l)break;const c=l+r;n[l+i]+=(r-i)*o;for(let e=1;e<r-i;e+=1)n[l+i+e]+=r-i;s=c}}}function R(e,n,t,o,i,s,r,l){const c=n.length;for(const u of o){const o=[...u],a=o.length;for(let u=0;;){const d=M(e,o,u);if(-1===d)break;const f=d+a;if((0===d||0!==d&&i.includes(n[d-1]))&&(f===c||f<c&&s.includes(n[f]))){t[d]+=r,f<t.length&&(t[f]+=l);for(let e=1;e<a;e+=1)t[d+e]+=a}u=f}}}function M(e,n,t=0){if(null==e)return-1;if(0===e.length)return-1;for(let o=t;o<e.length-n.length+1;o+=1){let t=!0;for(let i=0;i<n.length;i+=1)if(e[o+i]!==n[i]){t=!1;break}if(t)return o}return-1}function W(e,n,t,o){const i=document.createDocumentFragment();let s="",r=0,l=0;for(const c of e){if(t[l]<=0){P(i,s,U(n,r,l),o.styleSegment),s="",r=l}s+=c,l+=1}if(s.length){P(i,s,U(n,r,n.length),o.styleSegment)}return i}function P(e,n,o,i){if(o)e.appendChild(document.createTextNode(n));else{const o=document.createElement("span");o.appendChild(document.createTextNode(n)),i.length&&t(o,i),e.appendChild(o)}}function U(e,n,t){for(let o=n;o<t;o+=1){const n=e[o];if(!F.includes(n))return!1}return!0}e.applySegmenter=S,e.applySegmenterToString=b}function o(e){return e.replace(/([^\x01-\x7E\xA1-\xDF]+)([\t\n]+|[ \f\n\r\t\v\u00a0\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\ufeff]{2})([^\x01-\x7E\xA1-\xDF]+)/g,((e,n,t,o)=>n+o))}})(window.NACSS.ja);
//# sourceMappingURL=ja.min.js.map